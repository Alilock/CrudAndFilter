@model ShopAndFilterVM
<!-- Fillter By Price -->
<div class="sidebar-widget price_range range mb-30">
    <style>
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button
        {
            -webkit-appearance: none;
        }

        .range-slider {
            position: relative;
            width: 100%;
            height: 10px;
            border-radius: 15px;
            background: transparent linear-gradient(90deg, #5f822d 0%, #a5af33 100%) 0% 0% no-repeat padding-box;
        }

            .range-slider .progress {
                position: absolute;
                left: 0%;
                right: 0%;
                height: 100%;
                border-radius: 15px;
                background: transparent linear-gradient(90deg, #e4e7c1 0%, #d39892 100%) 0% 0% no-repeat padding-box;
            }

            .range-slider input[type="range"] {
                position: absolute;
                width: 100%;
                height: 10px;
                -webkit-appearance: none;
                pointer-events: none;
                background: none;
                outline: none;
            }

            .range-slider .range-min::-webkit-slider-thumb {
                pointer-events: auto;
                -webkit-appearance: none;
                width: 20px;
                height: 15px;
                background: #fcfcfc 0% 0% no-repeat padding-box;
                border: 2px solid #8b9e30;
                border-radius: 20px;
                opacity: 1;
            }

            .range-slider .range-max::-webkit-slider-thumb {
                pointer-events: auto;
                -webkit-appearance: none;
                width: 20px;
                height: 15px;
                background: #fcfcfc 0% 0% no-repeat padding-box;
                border: 2px solid #a22a2a;
                border-radius: 20px;
                opacity: 1;
            }

    </style>
    <div class="flex relative justify-center items-center h-20 w-full mx-auto rounded">
        <div class="min-value numberVal">
            <input type="number" class="" min="0" max="100" value="25" disabled>
        </div>
        &nbsp;
        <div class="range-slider">
            <div class="progress"></div>
            <span class="range-min-wrapper">
                <input class="range-min" type="range" min="0" max="100" value="25">
                <!-- <span class="range-min-value">0</span> -->
            </span>
            <span class="range-max-wrapper">
                <input class="range-max" type="range" min="0" max="100" value="100">
                <!-- <span class="range-max-value">100</span> -->
            </span>
        </div>
        &nbsp;
        <div class="max-value numberVal">
            <input type="number" class="border text-center" min="0" max="100" value="75" disabled>
        </div>
        <script>
            const range = document.querySelectorAll(".range-slider span input");
            progress = document.querySelector(".range-slider .progress");
            let gap = 0.1;
            const inputValue = document.querySelectorAll(".numberVal input");

            range.forEach((input) => {
                input.addEventListener("input", (e) => {
                    let minRange = parseInt(range[0].value);
                    let maxRange = parseInt(range[1].value);

                    if (maxRange - minRange < gap) {
                        if (e.target.className === "range-min") {
                            range[0].value = maxRange - gap;
                        } else {
                            range[1].value = minRange + gap;
                        }
                    } else {
                        progress.style.left = (minRange / range[0].max) * 100 + "%";
                        progress.style.right = 100 - (maxRange / range[1].max) * 100 + "%";
                        inputValue[0].value = minRange;
                        inputValue[1].value = maxRange;
                    }
                });
            });
        </script>
    </div>
   
    <div class="list-group">
        <div class="list-group-item mb-10 mt-10">
                @using (Html.BeginForm("Filter", "Shop",FormMethod.Get))
                {
                  <label class="fw-900">Category</label>

                    <div class="custome-checkbox">

                    @foreach (var item in Model.Categories)
                    {
                        <input class="form-check-input" type="checkbox" name="category" id="@item.Name" value="@item.Id" />
                        <label class="form-check-label" for="@item.Name"><span>@item.Name (@Model.Products.Where(p=>p.CategoryId==item.Id).Count())</span></label>
                        <br />
                    }
                    </div>

                    <label class="fw-900 mt-15">Vendors</label>
                    <div class="custome-checkbox">
                        @foreach (var vendor in Model.Vendors)
                        {
                            <input class="form-check-input" type="checkbox" name="vendor" id="@vendor.Name" value="@vendor.Id" />
                            <label class="form-check-label" for="@vendor.Name"><span> @vendor.Name (@Model.Products.Where(p=>p.VendorId==vendor.Id).Count())</span></label>
                            <br />
                        }


                    </div>
                <button type="submit" asp-controller="Shop" asp-action="Filter" class="btn btn-sm btn-default"><i class="fi-rs-filter mr-5"></i> Fillter</button>

                }     
                
         

          
    </div>
</div>
</div>